k3s_cluster:
  vars:
    ansible_user: geoff
    k3s_version: v1.29.4+k3s1
    # previously --flannel-backend host-gw
    extra_server_args: "--tls-san='k3s-prod.lan.asio,k3s-prod' --disable traefik --disable servicelb --flannel-backend vxlan --kube-proxy-arg ipvs-strict-arp=true --kube-proxy-arg proxy-mode=ipvs --flannel-iface=br50"
    extra_agent_args: "--kube-proxy-arg ipvs-strict-arp=true --kube-proxy-arg proxy-mode=ipvs --flannel-iface=br50"
    api_endpoint: "k3s-prod.lan.asio"
    token: !vault |
              $ANSIBLE_VAULT;1.1;AES256
              31633662663162653535303834616534636432336161373534386432303130306132353932656463
              3434356638326263303166663364643738313131373930660a356432366234353665613335623163
              64396439346334363232313430396331366563373732373039393130643839386139333261303364
              3262393836303432380a393439316430626265623862343731336463613830306437343933313361
              32643561343731653866643033643530636135376463356536616238356439353163313665623731
              32633931636330353234363366353363363538303736613631333662643063396266306337383433
              36333462343465643830313435353162623732316235306233623039343938333062633666653538
              63383739376465363565333135393461313662623532336630636137306231303136613637303231
              33313865616339636135353763366639663939343139643031376431323365393736

  children:
    server:
      # order important ! the FIRST node will started with --init-node, so move the first node
      # to be not first if you dont want to init
      hosts:
        k3s-prod-server-3.lan.asio:
        k3s-prod-server-0.lan.asio:
        k3s-prod-server-1.lan.asio:
        k3s-prod-server-2.lan.asio:
        cloud.lan.asio:


    # agent:
    #   hosts:
    #     # for example